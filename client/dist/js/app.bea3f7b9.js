(function(t){function e(e){for(var i,n,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&p.push(r[n][0]),r[n]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);h&&h(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],i=!0,o=1;o<s.length;o++){var l=s[o];0!==r[l]&&(i=!1)}i&&(a.splice(e--,1),t=n(n.s=s[0]))}return t}var i={},r={app:0},a=[];function n(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=i,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var h=l;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var i=s("1356"),r=s.n(i);r.a},1356:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"body"}},[s("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[s("v-btn",t._g({attrs:{"x-small":"",id:"settings"}},i),[t._v("Settings")])]}}]),model:{value:t.settings,callback:function(e){t.settings=e},expression:"settings"}},[s("v-card",[s("v-toolbar",{attrs:{dark:"",color:"primary"}},[s("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.settings=!1}}},[t._v("X")]),s("v-toolbar-title",[t._v("Settings")]),s("v-spacer")],1),s("v-list",{attrs:{"three-line":"",subheader:""}},[s("v-subheader",[t._v("Wifi")]),s("v-list-item",[s("v-list-item-content",[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{staticClass:"pl-2",attrs:{cols:"1",xs:"1"}},[s("v-text-field",{ref:"target0",attrs:{maxlength:"2"},nativeOn:{input:function(e){return t.focusNext(0)}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t._v(":")]},proxy:!0}]),model:{value:t.wifiTargetToAdd[0],callback:function(e){t.$set(t.wifiTargetToAdd,0,e)},expression:"wifiTargetToAdd[0]"}})],1),s("v-col",{staticClass:"pl-2",attrs:{cols:"1",xs:"1"}},[s("v-text-field",{ref:"target1",attrs:{maxlength:"2"},nativeOn:{input:function(e){return t.focusNext(1)}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t._v(":")]},proxy:!0}]),model:{value:t.wifiTargetToAdd[1],callback:function(e){t.$set(t.wifiTargetToAdd,1,e)},expression:"wifiTargetToAdd[1]"}})],1),s("v-col",{staticClass:"pl-2",attrs:{cols:"1",xs:"1"}},[s("v-text-field",{ref:"target2",attrs:{maxlength:"2"},nativeOn:{input:function(e){return t.focusNext(2)}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t._v(":")]},proxy:!0}]),model:{value:t.wifiTargetToAdd[2],callback:function(e){t.$set(t.wifiTargetToAdd,2,e)},expression:"wifiTargetToAdd[2]"}})],1),s("v-col",{staticClass:"pl-2",attrs:{cols:"1",xs:"1"}},[s("v-text-field",{ref:"target3",attrs:{maxlength:"2"},nativeOn:{input:function(e){return t.focusNext(3)}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t._v(":")]},proxy:!0}]),model:{value:t.wifiTargetToAdd[3],callback:function(e){t.$set(t.wifiTargetToAdd,3,e)},expression:"wifiTargetToAdd[3]"}})],1),s("v-col",{staticClass:"pl-2",attrs:{cols:"1",xs:"1"}},[s("v-text-field",{ref:"target4",attrs:{maxlength:"2"},nativeOn:{input:function(e){return t.focusNext(4)}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t._v(":")]},proxy:!0}]),model:{value:t.wifiTargetToAdd[4],callback:function(e){t.$set(t.wifiTargetToAdd,4,e)},expression:"wifiTargetToAdd[4]"}})],1),s("v-col",{staticClass:"pl-2",attrs:{cols:"1",xs:"1"}},[s("v-text-field",{ref:"target5",attrs:{maxlength:"2"},model:{value:t.wifiTargetToAdd[5],callback:function(e){t.$set(t.wifiTargetToAdd,5,e)},expression:"wifiTargetToAdd[5]"}})],1),s("v-col",{attrs:{cols:"3",xs:"1"}},[s("v-btn",{staticClass:"ma-4",attrs:{small:"",color:"#0000ff"},on:{click:t.addWifiTarget}},[t._v("Add")])],1)],1),s("v-row",[s("v-col",{attrs:{cols:"8"}},[s("v-text-field",{attrs:{label:"Expected RSSI in immediate proximity",type:"number"},model:{value:t.wifiPowerTarget,callback:function(e){t.wifiPowerTarget=e},expression:"wifiPowerTarget"}})],1),s("v-col",{attrs:{cols:"8"}},[s("v-text-field",{attrs:{label:"Target Name"},model:{value:t.wifiTargetDescription,callback:function(e){t.wifiTargetDescription=e},expression:"wifiTargetDescription"}})],1)],1)],1)],1),t.wifiError?s("span",{staticClass:"red--text ml-4"},[t._v("Invalid target address")]):t._e()],1),t.wifiTargets.length?t._e():s("v-list-item",[s("v-list-item-content",[s("v-list-item-title",[t._v("No targets")])],1)],1),t.wifiTargets.length?s("v-list",t._l(t.wifiTargets,(function(e,i){return s("v-list-item",{key:i},[s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(e))]),t.wifiDescriptions[e]?s("v-list-item-subtitle",[t._v(t._s(t.wifiDescriptions[e]))]):t._e()],1),s("v-list-item-action",[s("v-btn",{staticClass:"red--text",attrs:{icon:""},on:{click:function(e){return t.removeFromWifiList(i)}}},[t._v("X")])],1)],1)})),1):t._e(),s("v-list-item",[t.wifiStarted?t._e():s("v-btn",{attrs:{color:"#008000","x-small":"",disabled:t.wifiDisable||0==t.wifiTargets.length},on:{click:t.startWifiScan}},[t._v("Start Wifi Scan")]),t.wifiStarted?s("v-btn",{attrs:{color:"#ff0000","x-small":"",disabled:t.wifiDisable||0==t.wifiTargets.length},on:{click:t.stopWifiScan}},[t._v("Stop Wifi Scan")]):t._e()],1),s("v-divider"),s("v-list",{attrs:{"three-line":"",subheader:""}},[s("v-subheader",[t._v("Bluetooth")]),s("v-list-item",[s("v-list-item-content",[s("v-container",{staticClass:"px-0",attrs:{fluid:""}},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{staticClass:"pl-2",attrs:{cols:"1",xs:"1"}},[s("v-text-field",{ref:"bttarget0",attrs:{maxlength:"2"},nativeOn:{input:function(e){return t.focusNextBT(0)}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t._v(":")]},proxy:!0}]),model:{value:t.btTargetToAdd[0],callback:function(e){t.$set(t.btTargetToAdd,0,e)},expression:"btTargetToAdd[0]"}})],1),s("v-col",{staticClass:"pl-2",attrs:{cols:"1",xs:"1"}},[s("v-text-field",{ref:"bttarget1",attrs:{maxlength:"2"},nativeOn:{input:function(e){return t.focusNextBT(1)}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t._v(":")]},proxy:!0}]),model:{value:t.btTargetToAdd[1],callback:function(e){t.$set(t.btTargetToAdd,1,e)},expression:"btTargetToAdd[1]"}})],1),s("v-col",{staticClass:"pl-2",attrs:{cols:"1",xs:"1"}},[s("v-text-field",{ref:"bttarget2",attrs:{maxlength:"2"},nativeOn:{input:function(e){return t.focusNextBT(2)}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t._v(":")]},proxy:!0}]),model:{value:t.btTargetToAdd[2],callback:function(e){t.$set(t.btTargetToAdd,2,e)},expression:"btTargetToAdd[2]"}})],1),s("v-col",{staticClass:"pl-2",attrs:{cols:"1",xs:"1"}},[s("v-text-field",{ref:"bttarget3",attrs:{maxlength:"2"},nativeOn:{input:function(e){return t.focusNextBT(3)}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t._v(":")]},proxy:!0}]),model:{value:t.btTargetToAdd[3],callback:function(e){t.$set(t.btTargetToAdd,3,e)},expression:"btTargetToAdd[3]"}})],1),s("v-col",{staticClass:"pl-2",attrs:{cols:"1",xs:"1"}},[s("v-text-field",{ref:"bttarget4",attrs:{maxlength:"2"},nativeOn:{input:function(e){return t.focusNextBT(4)}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t._v(":")]},proxy:!0}]),model:{value:t.btTargetToAdd[4],callback:function(e){t.$set(t.btTargetToAdd,4,e)},expression:"btTargetToAdd[4]"}})],1),s("v-col",{staticClass:"pl-2",attrs:{cols:"1",xs:"1"}},[s("v-text-field",{ref:"bttarget5",attrs:{maxlength:"2"},model:{value:t.btTargetToAdd[5],callback:function(e){t.$set(t.btTargetToAdd,5,e)},expression:"btTargetToAdd[5]"}})],1)],1),s("v-row",[s("v-col",{staticClass:"pl-5",attrs:{cols:"6",xs:"1"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking,expression:"tracking"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(t.tracking)?t._i(t.tracking,null)>-1:t.tracking},on:{change:function(e){var s=t.tracking,i=e.target,r=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.tracking=s.concat([a])):n>-1&&(t.tracking=s.slice(0,n).concat(s.slice(n+1)))}else t.tracking=r}}}),s("label",{attrs:{for:"checkbox"}},[t._v("Tracking Fox?")])]),s("v-col",{attrs:{cols:"1",xs:"1"}},[s("v-btn",{attrs:{color:"#0000ff",small:""},on:{click:t.addBtTarget}},[t._v("Add")])],1)],1),s("v-row",[s("v-col",{attrs:{cols:"8"}},[s("v-text-field",{attrs:{label:"Expected RSSI in immediate proximity",type:"number"},model:{value:t.btPowerTarget,callback:function(e){t.btPowerTarget=e},expression:"btPowerTarget"}})],1),s("v-col",{attrs:{cols:"8"}},[s("v-text-field",{attrs:{label:"Target Name"},model:{value:t.btTargetDescription,callback:function(e){t.btTargetDescription=e},expression:"btTargetDescription"}})],1)],1)],1),t.btError?s("span",{staticClass:"red--text pl-4"},[t._v("Invalid target address")]):t._e(),t.trackingFox?s("span",{staticClass:"pl-2"},[t._v("Tracking Fox: "+t._s(t.trackingFox+(t.btDescriptions[t.trackingFox]?" - "+t.btDescriptions[t.trackingFox]:""))+"\n              "),s("v-btn",{staticClass:"red--text",attrs:{icon:""},on:{click:function(e){return t.removeTrackingFox()}}},[t._v("X")])],1):t._e(),s("span",{staticClass:"pl-2 headline"},[t._v("Beaconing Targets")]),t.btTargets.length?t._e():s("v-list-item",[s("v-list-item-content",[s("v-list-item-title",[t._v("No targets")])],1)],1),t.btTargets.length?s("v-list",t._l(t.btTargets,(function(e,i){return s("v-list-item",{key:i},[s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(e))]),t.btDescriptions[e]?s("v-list-item-subtitle",[t._v(t._s(t.btDescriptions[e]))]):t._e()],1),s("v-list-item-action",[s("v-btn",{staticClass:"red--text",attrs:{icon:""},on:{click:function(e){return t.removeFromBtList(i)}}},[t._v("X")])],1)],1)})),1):t._e()],1)],1),s("v-list-item",[t.btStarted?t._e():s("v-btn",{attrs:{color:"#008000","x-small":"",disabled:t.btDisable||0==t.btTargets.length&&""==t.trackingFox},on:{click:t.startBtScan}},[t._v("Start Bluetooth Scan")]),t.btStarted?s("v-btn",{attrs:{color:"#ff0000","x-small":"",disabled:t.btDisable||0==t.btTargets.length&&""==t.trackingFox},on:{click:t.stopBtScan}},[t._v("Stop Bluetooth Scan")]):t._e()],1)],1),s("v-divider"),s("v-list",{attrs:{"three-line":"",subheader:""}},[s("v-subheader",[t._v("SDR")]),s("v-list-item",[s("v-list-item-content",[s("v-row",[s("v-col",{attrs:{cols:"8"}},[s("v-text-field",{ref:"freqTarget",attrs:{type:"number",label:"Frequency Target in MHz"},on:{change:t.checkFreq},model:{value:t.freqTarget,callback:function(e){t.freqTarget=e},expression:"freqTarget"}})],1),s("v-col",{attrs:{cols:"8"}},[s("v-text-field",{attrs:{label:"Expected RSSI in immediate proximity",type:"number"},model:{value:t.sdrPowerTarget,callback:function(e){t.sdrPowerTarget=e},expression:"sdrPowerTarget"}})],1)],1)],1)],1)],1),s("v-list-item",[t.sdrStarted?t._e():s("v-btn",{attrs:{color:"#008000","x-small":"",disabled:t.sdrDisable||null==t.freqTarget},on:{click:t.startSDRScan}},[t._v("Start SDR Scan")]),t.sdrStarted?s("v-btn",{attrs:{color:"#ff0000","x-small":"",disabled:t.sdrDisable||null==t.freqTarget},on:{click:t.stopSDRScan}},[t._v("Stop SDR Scan")]):t._e()],1)],1)],1)],1)},a=[];const n=s("5698");var o={name:"app",data(){return{scale:null,btScale:null,wifiError:null,btError:null,settings:!1,space:null,spaceWidth:0,spaceHeight:0,lengths:{},wifiTargetToAdd:["","","","","",""],wifiTargets:[],wifiElementTargets:[],wifiTargetText:[],wifiPowerTarget:-25,wifiTargetDescription:"",wifiDescriptions:{},wifiDisable:!0,wifiStarted:!1,freqTarget:null,sdrTargetText:null,sdrTargets:[],sdrStarted:!1,sdrDisable:!0,sdrPowerTarget:-32,btTargetToAdd:["","","","","",""],btTargets:[],btElementTargets:[],btTargetText:[],btPowerTarget:-38,btTargetDescription:"",btDescriptions:{},trackingFox:"",btStarted:!1,btDisable:!0,tracking:!1,colors:["red","orange","lime","blue"]}},mounted(){var t=this;this.$service.getAllTargets().then(e=>{t.setWifiTargets(e.wifiTargets,e.wifiStopped,e.wifiDescriptions),t.setBtTargets({btTargets:e.bluetoothTargets,trackingFox:e.trackingFox},e.bluetoothStopped,e.btDescriptions),t.setFrequency(e.sdrTarget,e.sdrStopped)});var e=n.select("#body");this.spaceWidth=window.innerWidth,this.spaceHeight=window.innerHeight,this.scale=n.scaleLinear().domain([0,100]).range([0,.9*this.spaceHeight]).clamp(!0),this.btScale=n.scaleLinear().domain([0,10]).range([0,.9*this.spaceHeight]).clamp(!0),this.sdrScale=n.scaleLinear().domain([0,40]).range([0,.9*this.spaceHeight]).clamp(!0),this.lengths={far:this.spaceHeight/3,near:-this.spaceHeight/6,immediate:-this.spaceHeight/3},this.space=e.append("svg").attr("width",this.spaceWidth).attr("height",this.spaceHeight).append("g").attr("transform","translate("+this.spaceWidth/2+","+this.spaceHeight/2+")");var s=n.line().context(null);this.space.append("text").text("Wifi").attr("font-size","20px").attr("fill","white").style("text-anchor","middle").attr("transform","translate(-"+this.spaceWidth/4+","+(-this.spaceHeight/2+20)+")"),this.space.append("text").text("Bluetooth").attr("font-size","20px").attr("fill","white").style("text-anchor","middle").attr("transform","translate(0,"+(-this.spaceHeight/2+20)+")"),this.space.append("text").text("SDR").attr("font-size","20px").attr("fill","white").style("text-anchor","middle").attr("transform","translate("+this.spaceWidth/4+","+(-this.spaceHeight/2+20)+")"),this.space.append("path").attr("d",s([[-this.spaceWidth/2,this.lengths.far],[this.spaceWidth/2,this.lengths.far]])).style("stroke","rgb(0,0,255)"),this.space.append("text").text("FAR").attr("font-size","16px").attr("fill","white").attr("transform","translate(-"+this.spaceWidth/2+","+(this.lengths.far-10)+")"),this.space.append("path").attr("d",s([[-this.spaceWidth/2,this.lengths.near],[this.spaceWidth/2,this.lengths.near]])).style("stroke","rgb(193,51,255)"),this.space.append("text").text("NEAR").attr("font-size","16px").attr("fill","white").attr("transform","translate(-"+this.spaceWidth/2+","+(this.lengths.near-10)+")"),this.space.append("path").attr("d",s([[-this.spaceWidth/2,this.lengths.immediate],[this.spaceWidth/2,this.lengths.immediate]])).style("stroke","rgb(255,51,199)"),this.space.append("text").text("CLOSE").attr("font-size","16px").attr("fill","white").attr("transform","translate(-"+this.spaceWidth/2+","+(this.lengths.immediate-10)+")")},methods:{calcDistance(t,e){var s=t-e,i=Math.pow(10,s/10),r=Math.sqrt(i);return r},resetForm(){this.wifiTargetToAdd=["","","","","",""],this.btTargetToAdd=["","","","","",""]},updateWifi(t){this.removeWifi();var e=Date.now();t=JSON.parse(t);var s={};t.forEach(t=>{var[e,i,r]=t.split("\t");Object.keys(s).includes(e)?s[e].push({mac:e,rssi:i,ts:new Date(r).valueOf()}):s[e]=[{mac:e,rssi:i,ts:new Date(r).valueOf()}]}),Object.keys(s).sort().forEach((t,i)=>{s[t].forEach((r,a)=>{var o=this.calcDistance(this.wifiPowerTarget,r.rssi),l=this.scale(o);a==s[t].length-1?(this.wifiElementTargets.push(this.space.append("circle").attr("r",10).style("stroke",this.colors[i%this.colors.length]).style("fill","white").style("fill-opacity",1-(e-r.ts)/1e3/20).style("stroke-width",5).attr("transform","translate(-"+this.spaceWidth/4+","+(l-.45*this.spaceHeight)+")")),this.wifiTargetText.push(this.space.append("text").text(r.mac).attr("font-size","10px").attr("fill","white").style("text-anchor","middle").attr("transform","translate(-"+this.spaceWidth/4+","+(l-.45*this.spaceHeight-25)+")")),this.wifiDescriptions[r.mac]&&this.wifiTargetText.push(this.space.append("text").text("("+this.wifiDescriptions[r.mac]+")").attr("font-size","10px").attr("fill","white").style("text-anchor","middle").attr("transform","translate(-"+this.spaceWidth/4+","+(l-.45*this.spaceHeight-15)+")"))):this.wifiElementTargets.push(this.space.append("path").attr("d",n.symbol().type(n.symbolCircle).size(100)).attr("fill",this.colors[i%this.colors.length]).attr("fill-opacity",1-(e-r.ts)/1e3/20).attr("transform","translate(-"+this.spaceWidth/4+","+(l-.45*this.spaceHeight)+")"))},this)},this)},startWifiScan(){this.wifiStarted=!0,this.$service.startWifiScanning(),this.$service.getWifiResults(this.updateWifi)},stopWifiScan(){this.wifiStarted=!1,this.$service.stopWifiScanning(),this.removeWifi()},addWifiTarget(){let t=this.wifiTargetToAdd.join(":");/[0-9a-fA-F:]{17}/.test(t)?(this.error=!1,this.wifiTargets.push(t),this.wifiTargetDescription&&(this.wifiDescriptions[t]=this.wifiTargetDescription),this.$service.setWifiTargets({wifiTargets:this.wifiTargets,wifiDescriptions:this.wifiDescriptions}),this.resetForm(),this.stopWifiScan()):this.error=!0},focusNext(t){2==this.wifiTargetToAdd[t].length&&this.$nextTick(this.$refs[`target${t+1}`].focus)},removeFromWifiList(t){this.wifiTargets.splice(t,1),this.$service.setWifiTargets(this.wifiTargets),this.stopWifiScan()},setWifiTargets(t,e,s){this.wifiTargets=t,this.wifiDescriptions=s,this.wifiStarted=!e,this.wifiStarted&&this.$service.getWifiResults(this.updateWifi),this.wifiDisable=!1},removeWifi(){this.wifiElementTargets.forEach(t=>{t.remove()}),this.wifiTargetText.length&&this.wifiTargetText.forEach(t=>{t.remove()}),this.wifiElementTargets=[],this.wifiTargetText=[]},focusNextBT(t){2==this.btTargetToAdd[t].length&&this.$nextTick(this.$refs[`bttarget${t+1}`].focus)},updateBt(t){this.removeBt();var e=Date.now();t=JSON.parse(t);var s={};t.forEach(t=>{Object.keys(s).includes(t.mac)?s[t.mac].push(t):s[t.mac]=[t]}),Object.keys(s).sort().forEach((t,i)=>{s[t].forEach((r,a)=>{var o,l;t==this.trackingFox?(o=this.calcDistance(-50,r.rssi),l=this.btScale(o)):(o=this.calcDistance(this.btPowerTarget,r.rssi),l=this.scale(o)),a==s[t].length-1?(this.btElementTargets.push(this.space.append("circle").attr("r",10).style("stroke",this.colors[i%this.colors.length]).style("fill","white").style("fill-opacity",1-(e-r.ts)/1e3/20).style("stroke-width",5).attr("transform","translate(0,"+(l-.45*this.spaceHeight)+")")),this.btTargetText.push(this.space.append("text").text(r.mac).attr("font-size","10px").attr("fill","white").style("text-anchor","middle").attr("transform","translate(0,"+(l-.45*this.spaceHeight-25)+")")),this.btDescriptions[r.mac]&&this.btTargetText.push(this.space.append("text").text("("+this.btDescriptions[r.mac]+")").attr("font-size","10px").attr("fill","white").style("text-anchor","middle").attr("transform","translate(0,"+(l-.45*this.spaceHeight-15)+")"))):this.btElementTargets.push(this.space.append("path").attr("d",n.symbol().type(n.symbolCircle).size(100)).attr("fill",this.colors[i%this.colors.length]).attr("fill-opacity",1-(e-r.ts)/1e3/20).attr("transform","translate(0,"+(l-.45*this.spaceHeight)+")"))},this)},this)},setBtTargets(t,e,s){this.btTargets=t.btTargets,this.trackingFox=t.trackingFox,this.btDescriptions=s,this.btStarted=!e,this.btStarted&&this.$service.getBluetoothResults(this.updateBt),this.btDisable=!1},removeFromBtList(t){this.btTargets.splice(t,1),this.$service.setBluetoothTargets(this.btTargets,this.trackingFox),this.stopBtScan()},removeTrackingFox(){this.trackingFox="",this.$service.setBluetoothTargets(this.btTargets,this.trackingFox),this.stopBtScan()},startBtScan(){this.btStarted=!0,this.$service.startBluetoothScanning(),this.$service.getBluetoothResults(this.updateBt)},stopBtScan(){this.btStarted=!1,this.$service.stopBluetoothScanning(),this.removeBt()},addBtTarget(){let t=this.btTargetToAdd.join(":");/[0-9a-fA-F:]{17}/.test(t)&&(this.btError=!1,this.tracking?this.trackingFox=t:this.btTargets.push(t),this.btTargetDescription&&(this.btDescriptions[t]=this.btTargetDescription),this.$service.setBluetoothTargets(this.btTargets,this.trackingFox,this.btDescriptions),this.resetForm(),this.stopBtScan())},removeBt(){this.btElementTargets.forEach(t=>{t.remove()}),this.btTargetText.length&&this.btTargetText.forEach(t=>{t.remove()}),this.btElementTargets=[],this.btTargetText=[]},updateSDR(t){this.removeSDR();var e=Date.now();t=JSON.parse(t),t.forEach((s,i)=>{var r=this.calcDistance(this.sdrPowerTarget,s.dbm),a=this.sdrScale(r);i==t.length-1?(this.sdrTargets.push(this.space.append("circle").attr("r",10).style("stroke","red").style("fill","white").style("fill-opacity",1-(e-s.ts)/1e3/20).style("stroke-width",5).attr("transform","translate("+this.spaceWidth/4+","+(a-.45*this.spaceHeight)+")")),this.sdrTargetText=this.space.append("text").text(this.freqTarget+" MHz").attr("font-size","10px").attr("fill","white").style("text-anchor","middle").attr("transform","translate("+this.spaceWidth/4+","+(a-.45*this.spaceHeight-15)+")")):this.sdrTargets.push(this.space.append("path").attr("d",n.symbol().type(n.symbolCircle).size(100)).attr("fill","yellow").attr("fill-opacity",1-(e-s.ts)/1e3/20).attr("transform","translate("+this.spaceWidth/4+","+(a-.45*this.spaceHeight)+")"))},this)},removeSDR(){this.sdrTargets.forEach(t=>{t.remove()}),this.sdrTargetText&&this.sdrTargetText.remove(),this.sdrTargets=[],this.sdrTargetText=null},startSDRScan(){this.sdrStarted=!0,this.$service.startSDRScanning(),this.$service.getSDRResults(this.updateSDR)},stopSDRScan(){this.sdrStarted=!1,this.$service.stopSDRScanning(),this.removeSDR()},setFrequency(t,e){this.sdrStarted=!e,this.freqTarget=t,this.sdrStarted&&this.$service.getSDRResults(this.updateSDR),this.sdrDisable=!1},checkFreq(){let t=parseFloat(this.freqTarget);"number"!=typeof t||isNaN(t)?this.error=!0:(this.error=!1,this.$service.setSDRTarget(t))}}},l=o,c=(s("034f"),s("2877")),h=s("6544"),d=s.n(h),p=s("8336"),f=s("b0af"),u=s("62ad"),g=s("a523"),v=s("169a"),T=s("ce7e"),b=s("8860"),m=s("da13"),x=s("1800"),w=s("5d23"),S=s("0fd9"),y=s("2fa4"),k=s("e0c7"),D=s("8654"),_=s("71d9"),A=s("2a7f"),W=Object(c["a"])(l,r,a,!1,null,null,null),$=W.exports;d()(W,{VBtn:p["a"],VCard:f["a"],VCol:u["a"],VContainer:g["a"],VDialog:v["a"],VDivider:T["a"],VList:b["a"],VListItem:m["a"],VListItemAction:x["a"],VListItemContent:w["a"],VListItemSubtitle:w["b"],VListItemTitle:w["c"],VRow:S["a"],VSpacer:y["a"],VSubheader:k["a"],VTextField:D["a"],VToolbar:_["a"],VToolbarTitle:A["a"]});var E=function(t){this.$http=t,this.wifisource=null,this.btsource=null,this.sdrsource=null,this.wificallback=null,this.btcallback=null,this.sdrcallback=null};function B(t){if(!B.installed){B.installed=!0;var e=null;Object.defineProperties(t.prototype,{$service:{get:function(){if(!e){if(!this.$http)throw new Error("Request handler instance not found");e=new E(this.$http)}return e}}})}}E.prototype.getAllTargets=async function(){let t=await this.$http.get("/targets");return t.data},E.prototype.setWifiTargets=async function(t){this.$http.post("/wifi/targets",t)},E.prototype.startWifiScanning=async function(){this.$http.get("/wifi/startScan")},E.prototype.getWifiResults=function(t){var e=this;t&&(this.wificallback=t),this.wifisource=new EventSource("/wifi/results"),this.wifisource.addEventListener("message",(function(t){e.wificallback(t.data)}),!1),this.wifisource.addEventListener("error",(function(t){t.eventPhase==EventSource.CLOSED&&e.wifisource.close()}),!1)},E.prototype.stopWifiScanning=function(){null!=this.wifisource&&this.wifisource.close(),this.$http.get("/wifi/stopScan")},E.prototype.setBluetoothTargets=async function(t,e,s){this.$http.post("/bluetooth/targets",{targets:t,trackingFox:e,btDescriptions:s})},E.prototype.startBluetoothScanning=async function(){this.$http.get("/bluetooth/startScan")},E.prototype.getBluetoothResults=function(t){var e=this;t&&(this.btcallback=t),this.btsource=new EventSource("/bluetooth/results"),this.btsource.addEventListener("message",(function(t){e.btcallback(t.data)}),!1),this.btsource.addEventListener("error",(function(t){t.eventPhase==EventSource.CLOSED&&e.btsource.close()}),!1)},E.prototype.stopBluetoothScanning=function(){null!=this.btsource&&this.btsource.close(),this.$http.get("/bluetooth/stopScan")},E.prototype.setSDRTarget=async function(t){this.$http.post("/sdr/target",{frequency:t})},E.prototype.startSDRScanning=async function(){this.$http.get("/sdr/startScan")},E.prototype.getSDRResults=function(t){var e=this;t&&(this.sdrcallback=t),this.sdrsource=new EventSource("/sdr/results"),this.sdrsource.addEventListener("message",(function(t){e.sdrcallback(t.data)}),!1),this.sdrsource.addEventListener("error",(function(t){t.eventPhase==EventSource.CLOSED&&e.sdrsource.close()}),!1)},E.prototype.stopSDRScanning=function(){null!=this.sdrsource&&this.sdrsource.close(),this.$http.get("/sdr/stopScan")};var F=B,R=s("bc3a"),O=s.n(R),C=s("a7fe"),H=s.n(C),P=s("f309");i["a"].use(P["a"]);const L={};var N=new P["a"](L);i["a"].use(F,{}),i["a"].use(H.a,O.a),i["a"].config.productionTip=!1,new i["a"]({vuetify:N,render:t=>t($)}).$mount("#app")}});
//# sourceMappingURL=app.bea3f7b9.js.map